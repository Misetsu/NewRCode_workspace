let circle = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"></path></svg>';
let square = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path  d="M4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"></path></svg>';
let rectangle = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M3 4H21C21.5523 4 22 4.44772 22 5V19C22 19.5523 21.5523 20 21 20H3C2.44772 20 2 19.5523 2 19V5C2 4.44772 2.44772 4 3 4Z"></path></svg>';
let triangle = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M12.8659 3.00017L22.3922 19.5002C22.6684 19.9785 22.5045 20.5901 22.0262 20.8662C21.8742 20.954 21.7017 21.0002 21.5262 21.0002H2.47363C1.92135 21.0002 1.47363 20.5525 1.47363 20.0002C1.47363 19.8246 1.51984 19.6522 1.60761 19.5002L11.1339 3.00017C11.41 2.52187 12.0216 2.358 12.4999 2.63414C12.6519 2.72191 12.7782 2.84815 12.8659 3.00017Z"></path></svg>';
let arrow = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M13 12V20H11V12H4L12 4L20 12H13Z"></path></svg>';
let line = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M5 11V13H19V11H5Z"></path></svg>';
let sqdialogue = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M14.45 19L12 22.5L9.55 19H3C2.44772 19 2 18.5523 2 18V4C2 3.44772 2.44772 3 3 3H21C21.5523 3 22 3.44772 22 4V18C22 18.5523 21.5523 19 21 19H14.45Z"></path></svg>';
let cirdialogue = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242Z"></path></svg>';
let rectdialogue = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M6.45455 19L2 22.5V4C2 3.44772 2.44772 3 3 3H21C21.5523 3 22 3.44772 22 4V18C22 18.5523 21.5523 19 21 19H6.45455Z"></path></svg>';
let cursor = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M13.9093 12.3603L17.0007 20.8537L14.1816 21.8798L11.0902 13.3864L6.91797 16.5422L8.4087 1.63318L19.134 12.0959L13.9093 12.3603Z"></path></svg>';
let heart = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M12.001 4.52853C14.35 2.42 17.98 2.49 20.2426 4.75736C22.5053 7.02472 22.583 10.637 20.4786 12.993L11.9999 21.485L3.52138 12.993C1.41705 10.637 1.49571 7.01901 3.75736 4.75736C6.02157 2.49315 9.64519 2.41687 12.001 4.52853Z"></path></svg>';
let crown = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M2.00488 19H22.0049V21H2.00488V19ZM2.00488 5L7.00488 8L12.0049 2L17.0049 8L22.0049 5V17H2.00488V5Z"></path></svg>';
let star = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M12.0006 18.26L4.94715 22.2082L6.52248 14.2799L0.587891 8.7918L8.61493 7.84006L12.0006 0.5L15.3862 7.84006L23.4132 8.7918L17.4787 14.2799L19.054 22.2082L12.0006 18.26Z"></path></svg>';
let smile = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM7 12C7 14.7614 9.23858 17 12 17C14.7614 17 17 14.7614 17 12H15C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12H7Z"></path></svg>';
let check = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM11.0026 16L18.0737 8.92893L16.6595 7.51472L11.0026 13.1716L8.17421 10.3431L6.75999 11.7574L11.0026 16Z"></path></svg>';
let mail = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M3 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3ZM12.0606 11.6829L5.64722 6.2377L4.35278 7.7623L12.0731 14.3171L19.6544 7.75616L18.3456 6.24384L12.0606 11.6829Z"></path></svg>';
let phone = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M21 16.42V19.9561C21 20.4811 20.5941 20.9167 20.0705 20.9537C19.6331 20.9846 19.2763 21 19 21C10.1634 21 3 13.8366 3 5C3 4.72371 3.01545 4.36687 3.04635 3.9295C3.08337 3.40588 3.51894 3 4.04386 3H7.5801C7.83678 3 8.05176 3.19442 8.07753 3.4498C8.10067 3.67907 8.12218 3.86314 8.14207 4.00202C8.34435 5.41472 8.75753 6.75936 9.3487 8.00303C9.44359 8.20265 9.38171 8.44159 9.20185 8.57006L7.04355 10.1118C8.35752 13.1811 10.8189 15.6425 13.8882 16.9565L15.4271 14.8019C15.5572 14.6199 15.799 14.5573 16.001 14.6532C17.2446 15.2439 18.5891 15.6566 20.0016 15.8584C20.1396 15.8782 20.3225 15.8995 20.5502 15.9225C20.8056 15.9483 21 16.1633 21 16.42Z"></path></svg>';
let map = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M18.364 17.364L12 23.7279L5.63604 17.364C2.12132 13.8492 2.12132 8.15076 5.63604 4.63604C9.15076 1.12132 14.8492 1.12132 18.364 4.63604C21.8787 8.15076 21.8787 13.8492 18.364 17.364ZM12 13C13.1046 13 14 12.1046 14 11C14 9.89543 13.1046 9 12 9C10.8954 9 10 9.89543 10 11C10 12.1046 10.8954 13 12 13Z"></path></svg>';
let walk = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M7.61713 8.71233L10.8222 6.38373C11.174 6.12735 11.6087 5.98543 12.065 6.0008C13.1764 6.02813 14.1524 6.75668 14.4919 7.82036C14.6782 8.40431 14.8481 8.79836 15.0017 9.0025C15.914 10.2155 17.3655 11 19.0002 11V13C16.8255 13 14.8825 12.0083 13.5986 10.4526L12.901 14.4085L14.9621 16.138L17.1853 22.246L15.3059 22.93L13.266 17.3256L9.87576 14.4808C9.32821 14.0382 9.03139 13.3192 9.16231 12.5767L9.67091 9.6923L8.99407 10.1841L6.86706 13.1116L5.24902 11.9361L7.60016 8.7L7.61713 8.71233ZM13.5002 5.5C12.3956 5.5 11.5002 4.60457 11.5002 3.5C11.5002 2.39543 12.3956 1.5 13.5002 1.5C14.6047 1.5 15.5002 2.39543 15.5002 3.5C15.5002 4.60457 14.6047 5.5 13.5002 5.5ZM10.5286 18.6813L7.31465 22.5116L5.78257 21.226L8.75774 17.6803L9.50426 15.5L11.2954 17L10.5286 18.6813Z"></path></svg>';
let subway = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="60" height="60"><path d="M17.2 20L19 21.5V22H5V21.5L6.8 20H5C3.89543 20 3 19.1046 3 18V7C3 4.79086 4.79086 3 7 3H17C19.2091 3 21 4.79086 21 7V18C21 19.1046 20.1046 20 19 20H17.2ZM11 12V5H7C5.89543 5 5 5.89543 5 7V12H11ZM13 12H19V7C19 5.89543 18.1046 5 17 5H13V12ZM7.5 18C8.32843 18 9 17.3284 9 16.5C9 15.6716 8.32843 15 7.5 15C6.67157 15 6 15.6716 6 16.5C6 17.3284 6.67157 18 7.5 18ZM16.5 18C17.3284 18 18 17.3284 18 16.5C18 15.6716 17.3284 15 16.5 15C15.6716 15 15 15.6716 15 16.5C15 17.3284 15.6716 18 16.5 18Z"></path></svg>';

var shape1 = document.querySelector("#shape1");
var shape2 = document.querySelector("#shape2");
var shape3 = document.querySelector("#shape3");
var shape4 = document.querySelector("#shape4");
var shape5 = document.querySelector("#shape5");
var shape6 = document.querySelector("#shape6");
var shape7 = document.querySelector("#shape7");
var shape8 = document.querySelector("#shape8");
var shape9 = document.querySelector("#shape9");
var shape10 = document.querySelector("#shape10");
var shape11 = document.querySelector("#shape11");
var shape12 = document.querySelector("#shape12");
var shape13 = document.querySelector("#shape13");
var shape14 = document.querySelector("#shape14");
var shape15 = document.querySelector("#shape15");
var shape16 = document.querySelector("#shape16");
var shape17 = document.querySelector("#shape17");
var shape18 = document.querySelector("#shape18");
var shape19 = document.querySelector("#shape19");
var shape20 = document.querySelector("#shape20");

shape1.addEventListener("click", addShape1);
shape2.addEventListener("click", addShape2);
shape3.addEventListener("click", addShape3);
shape4.addEventListener("click", addShape4);
shape5.addEventListener("click", addShape5);
shape6.addEventListener("click", addShape6);
shape7.addEventListener("click", addShape7);
shape8.addEventListener("click", addShape8);
shape9.addEventListener("click", addShape9);
shape10.addEventListener("click", addShape10);
shape11.addEventListener("click", addShape11);
shape12.addEventListener("click", addShape12);
shape13.addEventListener("click", addShape13);
shape14.addEventListener("click", addShape14);
shape15.addEventListener("click", addShape15);
shape16.addEventListener("click", addShape16);
shape17.addEventListener("click", addShape17);
shape18.addEventListener("click", addShape18);
shape19.addEventListener("click", addShape19);
shape20.addEventListener("click", addShape20);

var shapeRGB = document.getElementById("shapeColor").value;
var shapeBorderRGB;
var shapeBorderWidth;

function addShape(svg) {
    var path = fabric.loadSVGFromString(svg, function (objects, options) {
        var obj = fabric.util.groupSVGElements(objects, options);
        obj.set({
            left: 100,
            top: 100,
            fill: "transparent",
            stroke: "black",
            strokeWidth: 2,
            type: "svg"
        });
        canvas.add(obj).renderAll();
    });
}

function changeColor(obj, color) {
    obj.set({
        fill: color
    });

    canvas.renderAll();
}

function changeBorderColor(obj, color) {
    obj.set({
        stroke: color
    });

    canvas.renderAll();
}

function changeBorderWidth(obj, width) {
    obj.set({
        strokeWidth: parseFloat(width)
    });

    canvas.renderAll();
}

function addShape1() {
    var svg = circle;
    addShape(svg);
}

function addShape2() {
    var svg = square;
    addShape(svg);
}

function addShape3() {
    var svg = rectangle;
    addShape(svg);
}

function addShape4() {
    var svg = triangle;
    addShape(svg);
}

function addShape5() {
    var svg = arrow;
    addShape(svg);
}

function addShape6() {
    var svg = line;
    addShape(svg);
}

function addShape7() {
    var svg = sqdialogue;
    addShape(svg);
}

function addShape8() {
    var svg = cirdialogue;
    addShape(svg);
}

function addShape9() {
    var svg = rectdialogue;
    addShape(svg);
}

function addShape10() {
    var svg = cursor;
    addShape(svg);
}

function addShape11() {
    var svg = heart;
    addShape(svg);
}

function addShape12() {
    var svg = crown;
    addShape(svg);
}

function addShape13() {
    var svg = star;
    addShape(svg);
}

function addShape14() {
    var svg = smile;
    addShape(svg);
}

function addShape15() {
    var svg = check;
    addShape(svg);
}

function addShape16() {
    var svg = mail;
    addShape(svg);
}

function addShape17() {
    var svg = phone;
    addShape(svg);
}

function addShape18() {
    var svg = map;
    addShape(svg);
}

function addShape19() {
    var svg = walk;
    addShape(svg);
}

function addShape20() {
    var svg = subway;
    addShape(svg);
}

document.getElementById("shapeColor").onchange = function () {
    shapeRGB = this.value;
    document.getElementById("shapeTransparent").checked = false;
    var activeObject = canvas.getActiveObject();
    if (activeObject.type === "svg") {
        changeColor(activeObject, shapeRGB);
        canvas.trigger('object:modified');
    }
}

document.getElementById("shapeBorderColor").onchange = function () {
    shapeBorderRGB = this.value;
    var activeObject = canvas.getActiveObject();
    if (activeObject.type === "svg") {
        changeBorderColor(activeObject, shapeBorderRGB);
        canvas.trigger('object:modified');
    }
}

document.getElementById("shapeBorderWidth").onchange = function () {
    shapeBorderWidth = this.value;
    var activeObject = canvas.getActiveObject();
    if (activeObject.type === "svg") {
        changeBorderWidth(activeObject, shapeBorderWidth);
        canvas.trigger('object:modified');
    }
}

document.getElementById('shapeTransparent').addEventListener('change', (event) => {
    if (event.currentTarget.checked) {
        var activeObject = canvas.getActiveObject();
        if (activeObject.type === "svg") {
            changeColor(activeObject, "transparent");
            canvas.trigger('object:modified');
        }
    } else {
        var activeObject = canvas.getActiveObject();
        if (activeObject.type === "svg") {
            changeColor(activeObject, shapeRGB);
            canvas.trigger('object:modified');
        }
    }
})